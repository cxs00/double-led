# 开发环境配置指南

## 🎯 概述

本指南将帮助您配置STM32 500双LED项目的完整开发环境，包括软件安装、硬件连接、项目配置等。

## 🚀 软件环境配置

### 1. 必需软件

#### Keil uVision 5
- **版本要求：** 5.25+
- **下载地址：** [Keil官网](https://www.keil.com/)
- **安装步骤：**
  1. 下载并安装Keil uVision 5
  2. 安装ARM编译器
  3. 配置许可证（如需要）

#### STM32CubeMX
- **版本要求：** 6.0+
- **下载地址：** [ST官网](https://www.st.com/)
- **安装步骤：**
  1. 下载并安装STM32CubeMX
  2. 安装STM32CubeF1 HAL库
  3. 配置项目模板

#### J-Link驱动
- **版本要求：** 7.0+
- **下载地址：** [SEGGER官网](https://www.segger.com/)
- **安装步骤：**
  1. 下载并安装J-Link驱动
  2. 连接J-Link调试器
  3. 验证驱动安装

### 2. 可选软件

#### STM32CubeIDE
- **用途：** 替代Keil的免费IDE
- **下载地址：** [ST官网](https://www.st.com/)
- **特点：** 基于Eclipse，免费使用

#### STM32CubeProgrammer
- **用途：** 程序烧录工具
- **下载地址：** [ST官网](https://www.st.com/)
- **特点：** 支持多种调试器

## 🔧 硬件环境配置

### 1. 主控芯片
- **型号：** STM32F103C8T6
- **封装：** LQFP48
- **特性：** 64KB Flash, 20KB RAM
- **工作电压：** 3.3V

### 2. 显示驱动
- **芯片：** 74HC595×3
- **功能：** 数码管段码和位码控制
- **连接：** SPI2总线
- **电源：** 5V

### 3. 按键输入
- **芯片：** 74HC165
- **功能：** 9键按键输入
- **连接：** SPI2总线
- **电源：** 5V

### 4. 调试接口
- **接口类型：** SWD
- **引脚连接：**
  - SWDIO → PA13
  - SWCLK → PA14
  - GND → GND
  - VCC → 3.3V

## 📁 项目配置

### 1. 打开项目
```
路径：software/MDK-ARM/500 double led.uvprojx
工具：Keil uVision 5
```

### 2. 配置目标
```
Project → Options for Target
Target → Device: STM32F103C8
Target → Flash: 64KB
Target → RAM: 20KB
```

### 3. 配置调试器
```
Debug → Use: J-Link / J-Trace Cortex
Settings → Debug → Port: SW (不选JTAG)
Settings → Flash Download → Programming Algorithm: STM32F10x Med-density (64KB)
```

### 4. 配置编译器
```
C/C++ → Define: USE_HAL_DRIVER, STM32F103xB
C/C++ → Include Paths: 添加所有头文件路径
Linker → Scatter File: 使用默认scatter文件
```

## ⚙️ 系统配置

### 1. 时钟配置
```
系统时钟：72MHz
HSE：8MHz外部晶振
PLL：9倍频
APB1：36MHz
APB2：72MHz
```

### 2. SPI2配置
```
模式：Master
数据位：8位
时钟极性：Low
时钟相位：1Edge
波特率：8MHz
NSS：软件控制
```

### 3. GPIO配置
```
PA13：SWDIO（调试）
PA14：SWCLK（调试）
PB13：SPI2_SCK
PB14：SPI2_MISO
PB15：SPI2_MOSI
PB7：LATCH（锁存）
```

## 🔍 配置验证

### 1. 编译验证
```
步骤：
1. 打开Keil项目
2. 按F7编译
3. 检查编译结果
4. 确保0 Error, 0 Warning

预期结果：
- 编译成功
- 生成.hex文件
- 无错误和警告
```

### 2. 硬件验证
```
步骤：
1. 连接硬件
2. 检查电源电压
3. 验证连接正确性
4. 测试基本功能

预期结果：
- 电源电压正确
- 连接无误
- 基本功能正常
```

### 3. 调试验证
```
步骤：
1. 连接J-Link
2. 配置调试器
3. 下载程序
4. 验证运行

预期结果：
- 连接成功
- 下载成功
- 程序运行正常
```

## ⚠️ 常见问题

### 1. 编译问题
**问题：** 编译错误或警告
**解决方案：**
- 检查头文件路径
- 验证库文件版本
- 确认编译器设置

### 2. 连接问题
**问题：** 无法连接调试器
**解决方案：**
- 检查硬件连接
- 验证驱动安装
- 确认接口设置

### 3. 烧录问题
**问题：** 程序烧录失败
**解决方案：**
- 检查Flash算法
- 验证芯片型号
- 确认电源稳定

## 📚 相关文档

### 配置文档
- [编译配置.md](编译配置.md)
- [调试配置.md](调试配置.md)
- [硬件连接指南.md](硬件连接指南.md)

### 使用文档
- [使用说明](../使用说明/)
- [工程文件](../工程文件/)
- [故障经验](../故障经验/)

## 🎯 下一步

完成开发环境配置后，您可以：

1. **开始开发** - 查看 [使用说明](../使用说明/)
2. **了解项目** - 查看 [工程文件](../工程文件/)
3. **解决问题** - 查看 [故障经验](../故障经验/)

---

**版本：** v1.0  
**最后更新：** 2025-10-25  
**维护者：** STM32开发团队
