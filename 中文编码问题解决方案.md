# Gitå’ŒPowerShellä¸­æ–‡ç¼–ç é—®é¢˜å®Œæ•´è§£å†³æ–¹æ¡ˆ

## ğŸ” é—®é¢˜è¡¨ç°

### ç—‡çŠ¶1ï¼šGitæäº¤ä¿¡æ¯ä¹±ç 
```bash
git log --oneline
# æ˜¾ç¤ºï¼šå¨£è¯²å§GitHubéºã„©â‚¬ä½¸ä¼éå³°æ‹°ç’ã‚ˆç˜‰ç’‡å­˜æ§‘é‚å›¨ã€‚
# åº”è¯¥ï¼šæ·»åŠ GitHubæ¨é€å·¥å…·å’Œè®¤è¯è¯´æ˜æ–‡æ¡£
```

### ç—‡çŠ¶2ï¼šæ–‡ä»¶åæ˜¾ç¤ºä¸ºå…«è¿›åˆ¶è½¬ä¹‰åºåˆ—
```bash
git status
# æ˜¾ç¤ºï¼šGitHub_Desktop\344\275\277\347\224\250\346\214\207\345\215\227.md
# åº”è¯¥ï¼šGitHub_Desktopä½¿ç”¨æŒ‡å—.md
```

### ç—‡çŠ¶3ï¼šPowerShellä¸­æ–‡æ˜¾ç¤ºä¹±ç 
- æ‰§è¡Œå‘½ä»¤åä¸­æ–‡å˜æˆä¹±ç 
- æ–‡ä»¶ååˆ›å»ºåå‡ºç°ä¹±ç 
- æ‰¹å¤„ç†è„šæœ¬ä¸­æ–‡ä¹±ç 

## ğŸ¯ æ ¹æœ¬åŸå› 

### 1. PowerShellé»˜è®¤ç¼–ç 
- **é»˜è®¤ç¼–ç **ï¼šWindows PowerShellä½¿ç”¨GBKç¼–ç ï¼ˆä»£ç é¡µ936ï¼‰
- **GitæœŸæœ›**ï¼šUTF-8ç¼–ç 
- **å†²çª**ï¼šç¼–ç ä¸åŒ¹é…å¯¼è‡´ä¸­æ–‡ä¹±ç 

### 2. Gitç¼–ç é…ç½®
- **é»˜è®¤è¡Œä¸º**ï¼šGitåœ¨Windowsä¸Šå¯èƒ½ä½¿ç”¨ç³»ç»Ÿé»˜è®¤ç¼–ç 
- **æ–‡ä»¶åè½¬ä¹‰**ï¼š`core.quotepath=true`æ—¶ï¼ŒéASCIIå­—ç¬¦æ˜¾ç¤ºä¸ºå…«è¿›åˆ¶è½¬ä¹‰
- **æäº¤ä¿¡æ¯**ï¼šæ²¡æœ‰æ˜ç¡®æŒ‡å®šç¼–ç æ—¶ä½¿ç”¨ç³»ç»Ÿé»˜è®¤ç¼–ç 

### 3. å­—ç¬¦ç¼–ç è½¬æ¢é”™è¯¯
```
ä¸­æ–‡å­—ç¬¦ â†’ GBKç¼–ç  â†’ Gitè¯¯è®¤ä¸ºUTF-8 â†’ æ˜¾ç¤ºä¹±ç 
```

## âœ… å®Œæ•´è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ1ï¼šæ°¸ä¹…é…ç½®Gitç¼–ç ï¼ˆæ¨èï¼‰

**æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š**
```powershell
# é…ç½®Gitä½¿ç”¨UTF-8ç¼–ç 
git config --global core.quotepath false        # ä¸è½¬ä¹‰éASCIIå­—ç¬¦
git config --global i18n.commitencoding utf-8   # commitä¿¡æ¯ä½¿ç”¨UTF-8
git config --global i18n.logoutputencoding utf-8 # logè¾“å‡ºä½¿ç”¨UTF-8
git config --global gui.encoding utf-8           # GUIç•Œé¢ä½¿ç”¨UTF-8
```

**éªŒè¯é…ç½®ï¼š**
```powershell
git config --global --list | Select-String -Pattern "i18n|core.quotepath|gui.encoding"
```

### æ–¹æ¡ˆ2ï¼šé…ç½®PowerShellç¼–ç 

**ä¸´æ—¶è®¾ç½®ï¼ˆå½“å‰ä¼šè¯ï¼‰ï¼š**
```powershell
$OutputEncoding = [System.Text.Encoding]::UTF8
[Console]::OutputEncoding = [System.Text.Encoding]::UTF8
[Console]::InputEncoding = [System.Text.Encoding]::UTF8
```

**æ°¸ä¹…è®¾ç½®ï¼ˆPowerShellé…ç½®æ–‡ä»¶ï¼‰ï¼š**

1. æ£€æŸ¥é…ç½®æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼š
```powershell
Test-Path $PROFILE
```

2. å¦‚æœä¸å­˜åœ¨ï¼Œåˆ›å»ºé…ç½®æ–‡ä»¶ï¼š
```powershell
New-Item -Path $PROFILE -Type File -Force
```

3. ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š
```powershell
notepad $PROFILE
```

4. æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š
```powershell
# è®¾ç½®PowerShellç¼–ç ä¸ºUTF-8
[Console]::OutputEncoding = [System.Text.Encoding]::UTF8
[Console]::InputEncoding = [System.Text.Encoding]::UTF8
$OutputEncoding = [System.Text.Encoding]::UTF8

# è®¾ç½®chcpä¸ºUTF-8ï¼ˆå¯é€‰ï¼‰
chcp 65001 > $null
```

5. é‡æ–°åŠ è½½é…ç½®ï¼š
```powershell
. $PROFILE
```

### æ–¹æ¡ˆ3ï¼šä½¿ç”¨æ‰¹å¤„ç†è„šæœ¬

**å¯¹äº.batæ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶å¼€å¤´æ·»åŠ ï¼š**
```batch
@echo off
chcp 65001 >nul
REM åç»­ä»£ç ...
```

**è¯´æ˜ï¼š**
- `chcp 65001`ï¼šå°†ä»£ç é¡µè®¾ç½®ä¸ºUTF-8
- `>nul`ï¼šéšè—è¾“å‡ºä¿¡æ¯

### æ–¹æ¡ˆ4ï¼šä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬

**è¿è¡Œé¡¹ç›®ä¸­çš„ä¿®å¤è„šæœ¬ï¼š**
```powershell
cd "D:\stm32\BilibiliProject\500 double led"
.\fix_encoding.ps1
```

æ­¤è„šæœ¬ä¼šè‡ªåŠ¨é…ç½®æ‰€æœ‰å¿…è¦çš„ç¼–ç è®¾ç½®ã€‚

## ğŸ”§ å·²å­˜åœ¨çš„ä¹±ç å¦‚ä½•å¤„ç†ï¼Ÿ

### é—®é¢˜ï¼šå†å²commitä¿¡æ¯å·²ç»ä¹±ç 

**é€‰é¡¹Aï¼šä¿æŒä¸å˜ï¼ˆæ¨èï¼‰**
- âœ… ä¼˜ç‚¹ï¼šä¸æ”¹å˜Gitå†å²ï¼Œä¿æŒå®Œæ•´æ€§
- âœ… ä¼˜ç‚¹ï¼šåœ¨GitHubç½‘é¡µç«¯é€šå¸¸èƒ½æ­£ç¡®æ˜¾ç¤º
- âŒ ç¼ºç‚¹ï¼šæœ¬åœ°PowerShellä¸­æ˜¾ç¤ºä»ç„¶ä¹±ç 

**é€‰é¡¹Bï¼šä¿®æ”¹æäº¤ä¿¡æ¯ï¼ˆé«˜çº§ï¼‰**
```powershell
# å±é™©æ“ä½œï¼ä¼šæ”¹å˜Gitå†å²
git rebase -i HEAD~5
# ç„¶åä½¿ç”¨git commit --amendä¿®æ”¹æ¯ä¸ªcommit
```

**æ³¨æ„ï¼š**
- âš ï¸ ä¿®æ”¹å†å²ä¼šæ”¹å˜commitå“ˆå¸Œ
- âš ï¸ å¦‚æœå·²ç»æ¨é€åˆ°è¿œç¨‹ï¼Œéœ€è¦force push
- âš ï¸ ä¸æ¨èä¿®æ”¹å·²æ¨é€çš„å†å²

### éªŒè¯ï¼šåœ¨GitHubç½‘é¡µæŸ¥çœ‹

è®¿é—®ï¼šhttps://github.com/cxs00/double-led/commits/master

**GitHubé€šå¸¸èƒ½æ­£ç¡®æ˜¾ç¤ºï¼š**
- GitHubä¼šå°è¯•è‡ªåŠ¨æ£€æµ‹ç¼–ç 
- å³ä½¿æœ¬åœ°ä¹±ç ï¼ŒGitHubä¸Šå¯èƒ½æ­£å¸¸æ˜¾ç¤º

## ğŸ“‹ é¢„é˜²æªæ–½æ¸…å•

### âœ… æ¯æ¬¡ä½¿ç”¨å‰æ£€æŸ¥

**1. ç¡®è®¤Gitç¼–ç é…ç½®ï¼š**
```powershell
git config --global -l | Select-String encoding
```

**2. ç¡®è®¤PowerShellç¼–ç ï¼š**
```powershell
[Console]::OutputEncoding
$OutputEncoding
```

**3. æµ‹è¯•ä¸­æ–‡æ˜¾ç¤ºï¼š**
```powershell
echo "æµ‹è¯•ä¸­æ–‡"
git log --oneline -1
```

### âœ… æ ‡å‡†æ“ä½œæµç¨‹

**æäº¤ä»£ç æ—¶ï¼š**
```powershell
# 1. è®¾ç½®ç¼–ç ï¼ˆå¦‚æœè¿˜æ²¡é…ç½®ï¼‰
$OutputEncoding = [System.Text.Encoding]::UTF8

# 2. ä½¿ç”¨è‹±æ–‡æˆ–æ­£ç¡®ç¼–ç çš„ä¸­æ–‡æäº¤
git add .
git commit -m "Add feature: description"

# 3. æ¨é€
git push origin master
```

**å»ºè®®ï¼š**
- é‡è¦commitä½¿ç”¨è‹±æ–‡æ¶ˆæ¯
- æˆ–ç¡®ä¿PowerShellç¼–ç æ­£ç¡®åä½¿ç”¨ä¸­æ–‡
- ä½¿ç”¨GitHub Desktopï¼ˆè‡ªåŠ¨å¤„ç†ç¼–ç ï¼‰

## ğŸ“ æŠ€æœ¯ç»†èŠ‚

### ç¼–ç è½¬æ¢è¿‡ç¨‹

**æ­£å¸¸æµç¨‹ï¼ˆUTF-8ï¼‰ï¼š**
```
ä¸­æ–‡è¾“å…¥ â†’ UTF-8ç¼–ç  â†’ Gitå­˜å‚¨(UTF-8) â†’ æ˜¾ç¤º(UTF-8) â†’ æ­£ç¡®æ˜¾ç¤º
```

**é”™è¯¯æµç¨‹ï¼ˆGBKï¼‰ï¼š**
```
ä¸­æ–‡è¾“å…¥ â†’ GBKç¼–ç  â†’ Gitå­˜å‚¨(å½“ä½œUTF-8) â†’ æ˜¾ç¤º(UTF-8) â†’ ä¹±ç 
```

### PowerShellç¼–ç å±‚çº§

1. **è¾“å…¥ç¼–ç **ï¼š`[Console]::InputEncoding`
2. **è¾“å‡ºç¼–ç **ï¼š`[Console]::OutputEncoding`
3. **ç®¡é“ç¼–ç **ï¼š`$OutputEncoding`

**å¿…é¡»å…¨éƒ¨è®¾ç½®ä¸ºUTF-8ï¼**

### Gitç¼–ç é…ç½®è¯´æ˜

| é…ç½®é¡¹ | ä½œç”¨ | é»˜è®¤å€¼ | æ¨èå€¼ |
|--------|------|--------|--------|
| `core.quotepath` | æ˜¯å¦è½¬ä¹‰éASCIIå­—ç¬¦ | true | **false** |
| `i18n.commitencoding` | commitä¿¡æ¯ç¼–ç  | ç³»ç»Ÿé»˜è®¤ | **utf-8** |
| `i18n.logoutputencoding` | logè¾“å‡ºç¼–ç  | ç³»ç»Ÿé»˜è®¤ | **utf-8** |
| `gui.encoding` | GUIç•Œé¢ç¼–ç  | ç³»ç»Ÿé»˜è®¤ | **utf-8** |

## ğŸš€ å¿«é€Ÿä¿®å¤å‘½ä»¤

**ä¸€é”®é…ç½®æ‰€æœ‰ç¼–ç ï¼š**
```powershell
# PowerShellç¼–ç 
$OutputEncoding = [System.Text.Encoding]::UTF8
[Console]::OutputEncoding = [System.Text.Encoding]::UTF8
[Console]::InputEncoding = [System.Text.Encoding]::UTF8

# Gitç¼–ç 
git config --global core.quotepath false
git config --global i18n.commitencoding utf-8
git config --global i18n.logoutputencoding utf-8
git config --global gui.encoding utf-8

# éªŒè¯
Write-Host "Gité…ç½®ï¼š" -ForegroundColor Green
git config --global -l | Select-String encoding
Write-Host "`nPowerShellç¼–ç ï¼š" -ForegroundColor Green
Write-Host "OutputEncoding: $([Console]::OutputEncoding.EncodingName)"
```

## ğŸ“– ç›¸å…³èµ„æº

### å®˜æ–¹æ–‡æ¡£
- [Git i18né…ç½®](https://git-scm.com/docs/git-config#Documentation/git-config.txt-i18ncommitEncoding)
- [PowerShellç¼–ç ](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_character_encoding)

### Windowsä»£ç é¡µ
- **65001**ï¼šUTF-8
- **936**ï¼šGBK (ç®€ä½“ä¸­æ–‡)
- **950**ï¼šBig5 (ç¹ä½“ä¸­æ–‡)

## âœ¨ æœ€ä½³å®è·µ

### æ¨èå·¥ä½œæµç¨‹

1. **åˆå§‹åŒ–é¡¹ç›®æ—¶ï¼š**
   ```powershell
   # è¿è¡Œç¼–ç é…ç½®è„šæœ¬
   .\fix_encoding.ps1
   ```

2. **æ—¥å¸¸å¼€å‘ï¼š**
   - ä½¿ç”¨GitHub Desktopï¼ˆè‡ªåŠ¨å¤„ç†ç¼–ç ï¼‰
   - æˆ–ç¡®ä¿PowerShellå·²é…ç½®UTF-8

3. **é‡è¦æäº¤ï¼š**
   - ä½¿ç”¨è‹±æ–‡commitæ¶ˆæ¯
   - æˆ–åœ¨æ­£ç¡®é…ç½®åä½¿ç”¨ä¸­æ–‡

4. **æ–‡ä»¶æ“ä½œï¼š**
   - æ‰¹å¤„ç†è„šæœ¬æ·»åŠ `chcp 65001`
   - PowerShellè„šæœ¬è®¾ç½®ç¼–ç 

### å·¥å…·æ¨è

- âœ… **GitHub Desktop**ï¼šè‡ªåŠ¨å¤„ç†ç¼–ç 
- âœ… **VS Code**ï¼šé»˜è®¤UTF-8
- âœ… **Windows Terminal**ï¼šæ”¯æŒUTF-8
- âŒ é¿å…ä½¿ç”¨cmd.exeï¼ˆç¼–ç é—®é¢˜å¤šï¼‰

## ğŸ“ æ€»ç»“

### å…³é”®è¦ç‚¹

1. âœ… **ç«‹å³é…ç½®**ï¼šè¿è¡Œ`fix_encoding.ps1`è„šæœ¬
2. âœ… **éªŒè¯é…ç½®**ï¼šæ£€æŸ¥Gitå’ŒPowerShellç¼–ç 
3. âœ… **æ ‡å‡†æµç¨‹**ï¼šä½¿ç”¨æ¨èçš„å·¥ä½œæµç¨‹
4. âœ… **é¢„é˜²æªæ–½**ï¼šéµå¾ªæœ€ä½³å®è·µ

### è®°ä½è¿™äº›å‘½ä»¤

```powershell
# å¿«é€Ÿä¿®å¤ï¼ˆæ¯æ¬¡æ‰“å¼€PowerShellï¼‰
$OutputEncoding = [System.Text.Encoding]::UTF8
[Console]::OutputEncoding = [System.Text.Encoding]::UTF8

# æˆ–è€…è¿è¡Œé¡¹ç›®è„šæœ¬
.\fix_encoding.ps1
```

---

**é…ç½®å®Œæˆåï¼Œæ‰€æœ‰æ–°çš„Gitæ“ä½œå°†æ­£ç¡®å¤„ç†ä¸­æ–‡ï¼** âœ¨

