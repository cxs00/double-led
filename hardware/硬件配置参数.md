# 硬件配置参数

> **项目**: STM32双数码管显示系统  
> **硬件版本**: v1.0.1  
> **最后更新**: 2025-10-25  
> **状态**: ✅ 活跃开发中  

---

## 🎯 硬件配置概述

### 配置参数分类
```
硬件配置参数:
├── 芯片配置参数 ────→ STM32F103C8T6配置
├── 接口配置参数 ────→ SPI2、SWD接口配置
├── 显示配置参数 ────→ 74HC595级联配置
├── 按键配置参数 ────→ 74HC165按键扫描配置
├── 电源配置参数 ────→ 3.3V电源系统配置
└── 时序配置参数 ────→ 各种时序参数配置
```

### 配置文件位置
```
配置文件位置:
├── 主配置文件: hardware/hardware_config.h
├── 版本配置: hardware/v1.0.1/
├── 备份配置: software/config/
└── 文档配置: hardware/README.md
```

---

## 🔧 STM32F103C8T6配置

### 芯片基本配置
```c
// STM32F103C8T6基本配置
#define STM32_CHIP_TYPE          STM32F103C8T6
#define STM32_CORE_TYPE          ARM_CORTEX_M3
#define STM32_FREQUENCY          72000000    // 72MHz
#define STM32_FLASH_SIZE         65536       // 64KB
#define STM32_SRAM_SIZE          20480       // 20KB
#define STM32_GPIO_COUNT         37          // 37个GPIO
```

### 时钟配置
```c
// 时钟配置
#define HSE_FREQUENCY            8000000     // 8MHz外部晶振
#define HSI_FREQUENCY            8000000     // 8MHz内部晶振
#define SYSCLK_FREQUENCY         72000000    // 72MHz系统时钟
#define APB1_FREQUENCY           36000000    // 36MHz APB1时钟
#define APB2_FREQUENCY           72000000    // 72MHz APB2时钟
```

### GPIO配置
```c
// GPIO配置
#define GPIO_PIN_COUNT           37          // 37个GPIO引脚
#define GPIO_USED_PINS           8           // 已使用8个引脚
#define GPIO_AVAILABLE_PINS      29          // 可用29个引脚
#define GPIO_USAGE_RATE          21.6        // 使用率21.6%
```

---

## ⚡ SPI2接口配置

### SPI2基本配置
```c
// SPI2基本配置
#define SPI2_INTERFACE           SPI2
#define SPI2_CLOCK_FREQUENCY     9000000     // 9MHz
#define SPI2_DATA_WIDTH          8           // 8位数据
#define SPI2_MODE                SPI_MODE_0 // SPI模式0
#define SPI2_BIT_ORDER           MSB_FIRST   // MSB先传输
```

### SPI2引脚配置
```c
// SPI2引脚配置
#define SPI2_SCK_PIN             PB13        // SPI2时钟引脚
#define SPI2_MISO_PIN            PB14        // SPI2数据输入引脚
#define SPI2_MOSI_PIN            PB15        // SPI2数据输出引脚
#define SPI2_LATCH_PIN           PB7         // SPI2锁存引脚
```

### SPI2时序配置
```c
// SPI2时序配置
#define SPI2_CLOCK_POLARITY      CPOL_0      // 时钟极性0
#define SPI2_CLOCK_PHASE         CPHA_0      // 时钟相位0
#define SPI2_SETUP_TIME         10          // 建立时间10ns
#define SPI2_HOLD_TIME          10          // 保持时间10ns
#define SPI2_TRANSMISSION_DELAY 100         // 传输延迟100ns
```

---

## 🔌 74HC595级联配置

### 74HC595基本配置
```c
// 74HC595基本配置
#define HC595_CHIP_COUNT         3           // 3片74HC595
#define HC595_DATA_WIDTH         8           // 8位数据宽度
#define HC595_CASCADE_LEVELS     3           // 3级级联
#define HC595_TOTAL_BITS         24          // 总共24位输出
```

### 74HC595芯片配置
```c
// U1芯片配置 (D7段码+LED阴极)
#define HC595_U1_FUNCTION       "D7段码+LED阴极"
#define HC595_U1_OUTPUT_BITS    8           // 8位输出
#define HC595_U1_CASCADE_OUT    U2_SER      // 级联输出到U2

// U2芯片配置 (位选择+LED阳极)
#define HC595_U2_FUNCTION       "位选择+LED阳极"
#define HC595_U2_OUTPUT_BITS    8           // 8位输出
#define HC595_U2_PNP_INVERT     TRUE        // PNP晶体管反相
#define HC595_U2_CASCADE_OUT    U6_SER      // 级联输出到U6

// U6芯片配置 (D8段码)
#define HC595_U6_FUNCTION       "D8段码"
#define HC595_U6_OUTPUT_BITS    8           // 8位输出
#define HC595_U6_CASCADE_OUT    NONE        // 最后一级
```

### 74HC595时序配置
```c
// 74HC595时序配置
#define HC595_CLOCK_FREQUENCY    9000000     // 9MHz时钟
#define HC595_SETUP_TIME         10          // 建立时间10ns
#define HC595_HOLD_TIME         10          // 保持时间10ns
#define HC595_TRANSMISSION_DELAY 100         // 传输延迟100ns
#define HC595_LATCH_DELAY       50          // 锁存延迟50ns
#define HC595_CASCADE_DELAY      200         // 级联延迟200ns
```

---

## 📡 74HC165按键扫描配置

### 74HC165基本配置
```c
// 74HC165基本配置
#define HC165_CHIP_COUNT         1           // 1片74HC165
#define HC165_INPUT_BITS         9           // 9位输入
#define HC165_SCAN_FREQUENCY     100         // 100Hz扫描频率
#define HC165_DEBOUNCE_TIME      10          // 10ms去抖动时间
```

### 74HC165引脚配置
```c
// 74HC165引脚配置
#define HC165_SER_PIN           "按键9"     // SER引脚连接按键9
#define HC165_D0_PIN            "按键1"     // D0引脚连接按键1
#define HC165_D1_PIN            "按键2"     // D1引脚连接按键2
#define HC165_D2_PIN            "按键3"     // D2引脚连接按键3
#define HC165_D3_PIN            "按键4"     // D3引脚连接按键4
#define HC165_D4_PIN            "按键5"     // D4引脚连接按键5
#define HC165_D5_PIN            "按键6"     // D5引脚连接按键6
#define HC165_D6_PIN            "按键7"     // D6引脚连接按键7
#define HC165_D7_PIN            "按键8"     // D7引脚连接按键8
```

### 74HC165功能配置
```c
// 74HC165功能配置
#define KEY_RUN_STOP             D0          // 运行/停止按键
#define KEY_UP                   D1          // 频率增加按键
#define KEY_DOWN                 D2          // 频率减少按键
#define KEY_PRG                  D3          // 编程模式按键
#define KEY_ENTER                D4          // 确认按键
#define KEY_SHIFT                D5          // 功能切换按键
#define KEY_FUNC                 D6          // 功能键
#define KEY_RESERVED_1           D7          // 保留按键1
#define KEY_RESERVED_2           SER         // 保留按键2
```

---

## 💡 显示系统配置

### 数码管配置
```c
// 数码管配置
#define DISPLAY_D7_DIGITS        5           // D7数码管位数
#define DISPLAY_D8_DIGITS        5           // D8数码管位数
#define DISPLAY_REFRESH_RATE     1000        // 1000Hz刷新率
#define DISPLAY_BIT_SCAN_TIME    1           // 1ms位扫描时间
#define DISPLAY_TOTAL_TIME       5           // 5ms总扫描时间
```

### D7数码管配置
```c
// D7数码管配置 (频率显示)
#define D7_FUNCTION             "频率显示"
#define D7_DISPLAY_RANGE        0.00, 400.00 // 显示范围0.00-400.00Hz
#define D7_DECIMAL_PLACES        2           // 2位小数
#define D7_UNIT                  "Hz"        // 单位Hz
#define D7_SEGMENT_CONTROL       U1_OUTPUT   // U1输出控制
#define D7_BIT_SELECTION         U2_OUTPUT   // U2输出位选择
```

### D8数码管配置
```c
// D8数码管配置 (电流显示)
#define D8_FUNCTION             "电流显示"
#define D8_DISPLAY_RANGE        0.00, 999.99 // 显示范围0.00-999.99A
#define D8_DECIMAL_PLACES       2           // 2位小数
#define D8_UNIT                  "A"         // 单位A
#define D8_SEGMENT_CONTROL       U6_OUTPUT   // U6输出控制
#define D8_BIT_SELECTION         U2_OUTPUT   // U2输出位选择(复用)
```

### LED状态指示配置
```c
// LED状态指示配置
#define LED_COUNT                6           // 6个LED
#define LED_CATHODE_CONTROL      U1_QH       // U1.QH控制阴极
#define LED_ANODE_CONTROL        U2_OUTPUT   // U2输出控制阳极(反相)

// LED功能定义
#define LED_Hz                   U2_QF       // 频率单位指示
#define LED_A                    U2_QG       // 电流单位指示
#define LED_V                    U2_QH       // 电压单位指示
#define LED_ALM                  RESERVED   // 报警指示
#define LED_F_R                  RESERVED   // 正反转指示
#define LED_RUN                  RESERVED   // 运行状态指示
```

---

## 🐛 SWD调试接口配置

### SWD基本配置
```c
// SWD基本配置
#define SWD_INTERFACE           SWD         // SWD接口
#define SWD_CLOCK_FREQUENCY     10000000    // 最高10MHz
#define SWD_DATA_WIDTH          1           // 1位数据
#define SWD_PROTOCOL            SWD_PROTOCOL // SWD协议
```

### SWD引脚配置
```c
// SWD引脚配置
#define SWD_SWDIO_PIN           PA13        // SWD数据引脚
#define SWD_SWCLK_PIN           PA14        // SWD时钟引脚
#define SWD_VCC_PIN             VCC         // 3.3V供电
#define SWD_GND_PIN             GND         // 电源地
```

### SWD时序配置
```c
// SWD时序配置
#define SWD_CLOCK_FREQUENCY     10000000    // 最高10MHz
#define SWD_SETUP_TIME          10          // 建立时间10ns
#define SWD_HOLD_TIME           10          // 保持时间10ns
#define SWD_TRANSMISSION_DELAY    100         // 传输延迟100ns
```

---

## ⚡ 电源系统配置

### 电源基本配置
```c
// 电源基本配置
#define POWER_VOLTAGE           3.3         // 3.3V供电
#define POWER_TOLERANCE         0.05        // ±5%容差
#define POWER_MAX_CURRENT       0.15        // 最大150mA
#define POWER_RIPPLE            0.05        // 纹波<50mV
#define POWER_STABILITY         0.01        // 稳定性±1%
```

### 电源时序配置
```c
// 电源时序配置
#define POWER_ON_TIME           100         // 上电时间100ms
#define POWER_OFF_TIME          10          // 下电时间10ms
#define POWER_STABLE_TIME       50          // 电源稳定时间50ms
#define POWER_TRANSIENT_RESPONSE 100         // 瞬态响应100μs
```

### 电源滤波配置
```c
// 电源滤波配置
#define POWER_INPUT_CAPACITOR   100         // 输入滤波100μF
#define POWER_OUTPUT_CAPACITOR  10          // 输出滤波10μF
#define POWER_CERAMIC_CAPACITOR 0.1         // 陶瓷电容100nF
#define POWER_HIGH_FREQ_CAP     0.001       // 高频滤波1nF
```

---

## 🔄 时序配置参数

### 系统时序配置
```c
// 系统时序配置
#define SYSTEM_MAIN_CLOCK       72000000    // 72MHz主时钟
#define SYSTEM_SPI_CLOCK        9000000     // 9MHz SPI时钟
#define SYSTEM_DISPLAY_REFRESH  1000        // 1000Hz显示刷新
#define SYSTEM_KEY_SCAN         100         // 100Hz按键扫描
#define SYSTEM_DEBUG_CLOCK      10000000    // 10MHz调试时钟
```

### 时序同步配置
```c
// 时序同步配置
#define TIMING_SETUP_TIME       10          // 建立时间10ns
#define TIMING_HOLD_TIME        10          // 保持时间10ns
#define TIMING_TRANSMISSION_DELAY 100       // 传输延迟100ns
#define TIMING_CLOCK_SKEW       1           // 时钟偏移1ns
#define TIMING_JITTER           0.1         // 抖动0.1ns
```

---

## 📊 性能配置参数

### 系统性能配置
```c
// 系统性能配置
#define PERFORMANCE_MAIN_FREQ   72000000    // 72MHz主频
#define PERFORMANCE_SPI_FREQ    9000000     // 9MHz SPI频率
#define PERFORMANCE_DISPLAY_FREQ 1000       // 1000Hz显示刷新
#define PERFORMANCE_KEY_FREQ     100         // 100Hz按键扫描
#define PERFORMANCE_RESPONSE_TIME 1         // 1ms响应时间
```

### 功耗配置
```c
// 功耗配置
#define POWER_WORKING_VOLTAGE   3.3         // 3.3V工作电压
#define POWER_WORKING_CURRENT  0.15         // 150mA工作电流
#define POWER_STANDBY_CURRENT   0.00001     // 10μA待机电流
#define POWER_OPTIMIZATION      TRUE        // 功耗优化
```

### 可靠性配置
```c
// 可靠性配置
#define RELIABILITY_TEMP_MIN    -40         // -40°C最低温度
#define RELIABILITY_TEMP_MAX    85          // +85°C最高温度
#define RELIABILITY_HUMIDITY_MIN 10         // 10%最低湿度
#define RELIABILITY_HUMIDITY_MAX 90         // 90%最高湿度
#define RELIABILITY_MTBF        100000      // 100,000小时MTBF
```

---

## 🎯 配置优化建议

### 1️⃣ 性能优化配置
```c
// 性能优化配置
#define OPTIMIZATION_CLOCK_MANAGEMENT TRUE  // 时钟管理优化
#define OPTIMIZATION_POWER_MANAGEMENT TRUE  // 电源管理优化
#define OPTIMIZATION_SIGNAL_INTEGRITY  TRUE  // 信号完整性优化
#define OPTIMIZATION_EMC_COMPLIANCE    TRUE  // 电磁兼容性优化
```

### 2️⃣ 可靠性优化配置
```c
// 可靠性优化配置
#define RELIABILITY_ERROR_DETECTION    TRUE  // 错误检测
#define RELIABILITY_FAULT_RECOVERY     TRUE  // 故障恢复
#define RELIABILITY_REDUNDANCY         TRUE  // 冗余设计
#define RELIABILITY_QUALITY_ASSURANCE  TRUE  // 质量保证
```

### 3️⃣ 可维护性优化配置
```c
// 可维护性优化配置
#define MAINTAINABILITY_MODULAR_DESIGN TRUE  // 模块化设计
#define MAINTAINABILITY_DEBUG_INTERFACE TRUE // 调试接口
#define MAINTAINABILITY_DOCUMENTATION  TRUE  // 文档完整
#define MAINTAINABILITY_TECHNICAL_SUPPORT TRUE // 技术支持
```

---

## 📞 配置支持

### 🆘 配置问题诊断
```
配置问题诊断:
├── 硬件配置问题: 检查硬件配置参数
├── 接口配置问题: 检查接口配置参数
├── 时序配置问题: 检查时序配置参数
├── 电源配置问题: 检查电源配置参数
└── 性能配置问题: 检查性能配置参数
```

### 📚 学习资源
```
学习资源:
├── 技术文档: 完整的配置技术文档
├── 故障经验: 丰富的配置故障经验
├── 最佳实践: 配置设计最佳实践
└── 开发指南: 配置开发指南
```

### 🤝 协作支持
```
协作支持:
├── 开发协作: 配置开发协作指南
├── 版本管理: 配置版本控制和更新管理
├── 文档维护: 配置文档更新和维护
└── 技术支持: 配置技术问题支持
```

---

<div align="center">

## ⚙️ 硬件配置完成！

**完整的硬件配置参数！** 🔧

**配置清晰 + 参数准确 + 性能优 + 可靠性高**

**让STM32硬件开发更专业，让嵌入式系统更可靠！** 💪

</div>
